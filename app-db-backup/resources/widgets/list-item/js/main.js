(this.webpackJsonplistitem=this.webpackJsonplistitem||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);n(84),n(85);var a=n(43),r=n(11),o=n(50),i=n(49),c={en:n(67)},s=Object.keys(c).reduce((function(e,t){return Object(r.a)({},e,Object(a.a)({},t,{translation:c[t]}))}),{});o.a.use(i.a).init({fallbackLng:"en",resources:s,interpolation:{escapeValue:!1}});var l=n(22),u=n(23),d=n(25),p=n(24),m=n(80),f=n(0),h=n.n(f),g=n(13),v=n.n(g),b=h.a.createContext(null);var y=n(10),k=n.n(y),w=n(26),E=n(20),O=n(68),C=n.n(O),j=n(69),D=n.n(j),N=n(70),R=n.n(N),P=n(71),F=n.n(P),x=n(72),S=n.n(x),T=n(73),M=n.n(T),I="investments",A="managealerts",U="paybills",z="sendmoney",B="transfermoney",L="viewstatements",X={investments:C.a,managealerts:D.a,paybills:R.a,sendmoney:F.a,transfermoney:S.a,viewstatements:M.a},H=function(e){var t=e.icon,n=e.className,a=e.style,r="/entando-de-app/cmsresources/"+function(e){switch(e){case I:return X.investments;case A:return X.managealerts;case U:return X.paybills;case z:return X.sendmoney;case B:return X.transfermoney;case L:return X.viewstatements;default:return null}}(t);return h.a.createElement("img",{id:"my-icon",src:r,style:a,className:n,alt:"icon"})};H.defaultProps={className:"",style:{}};var J=H,W=function(e){var t=e.title,n=e.className,a=e.style;return h.a.createElement("span",{id:"my-title",className:n,style:a},t)};W.defaultProps={className:"",style:{}};var K=W,_=function(e){var t=e.count,n=e.className,a=e.style;return h.a.createElement("span",{id:"my-counter",className:n,style:a},t)};_.defaultProps={className:"",style:{}};var q=_,G=n(142),V=n(134),Y=n(135),Q=n(136),Z=n(137),$=n(133),ee=function(e){for(var t=e.className,n=e.itemsPerPage,a=e.totalItems,r=e.paginate,o=e.currentPage,i=[],c=1;c<=Math.ceil(a/n);c++)i.push(c);return h.a.createElement("nav",{className:t},h.a.createElement("ul",{className:"pagination"},i.map((function(e){return h.a.createElement("li",{key:e,className:"page-item"},h.a.createElement("button",{type:"button",onClick:function(){return r(e)},className:"page-link",style:o===e?{background:"#eeeeee"}:null},e))}))))},te=n(74),ne=n.n(te),ae=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).paginate=function(e){return a.setCurrentPage(e)},a.handleFileRead=function(e){var t=Object(r.a)({},e);if(!e.read){var n=a.props.putDocumentRead;t.read=!0,n(t)}},a.generateTable=function(e){return h.a.createElement($.a,{className:"MyTable",responsive:!0,size:"sm",hover:!0},h.a.createElement("thead",null,h.a.createElement("tr",null,h.a.createElement("th",null,"DOCUMENT"),h.a.createElement("th",null,"DATE"))),h.a.createElement("tbody",null,e&&e.map((function(e){var t=e.createdAt,n=e.description,r=e.read;return h.a.createElement("tr",{key:e.id,onClick:function(){a.handleFileRead(e),window.open(ne.a,"_blank")}},h.a.createElement("td",{style:r?{fontWeight:"normal"}:{fontWeight:"bold"}},n),h.a.createElement("td",{style:r?{fontWeight:"normal"}:{fontWeight:"bold"}},t))}))))},a.state={itemsPerPage:5,currentPage:1},a}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.data;e.data!==t&&this.handleTable()}},{key:"setCurrentPage",value:function(e){this.setState({currentPage:e})}},{key:"handleTable",value:function(){var e=this.props.data,t=this.state,n=t.currentPage,a=t.itemsPerPage,r=n*a,o=r-a,i=e.slice(o,r);return this.generateTable(i)}},{key:"render",value:function(){var e=this.state,t=e.itemsPerPage,n=e.currentPage,a=this.props.data;return h.a.createElement("div",null,this.handleTable(),h.a.createElement(ee,{className:"paginator",itemsPerPage:t,totalItems:a.length,currentPage:n,paginate:this.paginate}))}}]),n}(h.a.PureComponent),re=function(e){return e.date.toISOString().substring(0,10)},oe=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={descriptionFilter:""},a.onChangeDescription=a.onChangeDescription.bind(Object(E.a)(a)),a.filterByDescription=a.filterByDescription.bind(Object(E.a)(a)),a.onChangeRangeFilter=a.onChangeRangeFilter.bind(Object(E.a)(a)),a}return Object(u.a)(n,[{key:"onChangeDescription",value:function(e){var t;e&&e.target&&(t=e.target.value),this.setState({descriptionFilter:t})}},{key:"onChangeRangeFilter",value:function(e){var t,n=this.props.changeRangeFilter;e&&e.target&&(t=e.target.value);var a=new Date,r=re({date:a}),o={dateA:r,dateB:re({date:a})};switch(t){case"90":r=function(e){var t=e.d,n=e.range,a=new Date;return a.setDate(t.getDate()-n),re({date:a})}({d:a,range:90}),o.dateA=r;break;case"month":r=function(e){var t=e.d,n=new Date(t.getFullYear(),t.getMonth(),1,t.getHours());return re({date:n})}({d:new Date}),o.dateA=r;break;default:o=null}n(o)}},{key:"filterByDescription",value:function(e){var t=this.state.descriptionFilter;(0,this.props.changeDescription)(""===e?e:t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOpen,a=t.toggle,r=t.title,o=t.className,i=t.data,c=t.putDocumentRead,s=this.state.descriptionFilter;return h.a.createElement(G.a,{isOpen:n,className:o},h.a.createElement(V.a,{style:{color:"#0E6837"}},r,h.a.createElement("select",{name:"transactionRange",id:"transactionRange",className:"select-range",onChange:this.onChangeRangeFilter},h.a.createElement("option",{value:"all"},"All transactions"),h.a.createElement("option",{value:"month"},"Last month"),h.a.createElement("option",{value:"90"},"Last 90 days")),h.a.createElement("input",{className:"search-input",type:"text",onChange:this.onChangeDescription,value:s}),h.a.createElement("button",{className:"search-button",type:"button",onClick:this.filterByDescription},"Filter")),h.a.createElement(Y.a,{style:{padding:0}},h.a.createElement("div",{className:"my-table"},i&&h.a.createElement(ae,{toggleModal:a,data:i,putDocumentRead:c}))),h.a.createElement(Q.a,null,h.a.createElement(Z.a,{onClick:function(){e.onChangeRangeFilter(),e.onChangeDescription(),e.filterByDescription(""),a()}},"Close")))}}]),n}(f.Component);oe.defaultProps={title:"",className:"",data:[]};var ie=oe,ce=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,a=e.modalOpen,r=e.toggleModal,o=e.data,i=e.putDocumentRead,c=e.onChangeDescription,s=e.onChangeRangeFilter,l=function(){var e=0;return o.forEach((function(t){t.read||e++})),e};return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"list-item",onClick:Array.isArray(o)&&o.length?function(){return r()}:null},t&&h.a.createElement(J,{icon:t})," ",n&&h.a.createElement(K,{title:n})," ",o&&o.length>0&&0!==l()?h.a.createElement(q,{count:l()}):null),o?h.a.createElement(ie,{className:"my-modal",isOpen:a,toggle:r,title:n,data:o,putDocumentRead:i,changeDescription:function(e){c(e)},changeRangeFilter:function(e){s(e)}}):null)}}]),n}(h.a.PureComponent);ce.defaultProps={icon:"",iconStyle:{},countStyle:{},title:"",titleStyle:{},data:[]};var se=ce,le=n(139),ue=n(1),de=n.n(ue),pe=(de.a.shape({initialized:de.a.bool,authenticated:de.a.bool}),function(e){var t=e.children,n=e.keycloak;return n.initialized&&n.authenticated?t:null}),me=function(e){var t=e.children,n=e.keycloak;return n.initialized&&n.authenticated?null:t},fe=n(8),he=n(140),ge=n(143),ve=n(52),be=n(14),ye=n(141),ke=n(77),we=n.n(ke),Ee=n(78),Oe=n.n(Ee),Ce=n(75),je=n.n(Ce),De=n(79),Ne=n.n(De),Re={success:je.a,error:we.a,info:Oe.a},Pe={success:3e3,error:null,info:5e3},Fe=function e(t){var n=t.className,a=t.classes,r=t.status,o=t.message,i=t.onClose,c=!!o,s=r||e.INFO,l=Re[s],u=Pe[s],d=h.a.createElement("span",{className:a.message},h.a.createElement(l,{className:Object(fe.a)(a.icon,a.iconStatus)}),o);return h.a.createElement(he.a,{open:c,onClose:i,autoHideDuration:u},h.a.createElement(ge.a,{className:Object(fe.a)(a[s],n),message:d,action:[h.a.createElement(ye.a,{key:"close","aria-label":"close",color:"inherit",onClick:i},h.a.createElement(Ne.a,{className:a.icon}))]}))};Fe.SUCCESS="success",Fe.ERROR="error",Fe.defaultProps={message:null,className:"",status:Fe.INFO="info",onClose:function(){}};var xe=Object(be.a)((function(e){return{message:{display:"flex",alignItems:"center"},icon:{fontSize:20},iconStatus:{opacity:.9,marginRight:e.spacing(1)},success:{backgroundColor:ve.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main}}}),{withTheme:!0})(Fe),Se=n(32),Te="/banking/api",Me=function(){return{headers:new Headers({Authorization:"Bearer ".concat(window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:""),"Content-Type":"application/json"})}},Ie=function(){var e=Object(w.a)(k.a.mark((function e(t,n){var a,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,n);case 2:if(a=e.sent,o=Object(r.a)({},a.headers.has("X-Total-Count")?{"X-Total-Count":parseInt(a.headers.get("X-Total-Count"),10)}:{}),!(a.status>=200&&a.status<300)){e.next=12;break}return e.next=7,a.json();case 7:e.t1=e.sent,e.t2=o,e.t0={data:e.t1,headers:e.t2},e.next=13;break;case 12:e.t0=Promise.reject(new Error(a.statusText||a.status));case 13:return e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e.filter((function(e){return e.field&&e.operator})).reduce((function(e,t){switch(t.operator){case"specified":return[].concat(Object(Se.a)(e),["".concat(encodeURIComponent("".concat(t.field,".specified")),"=true")]);case"unspecified":return[].concat(Object(Se.a)(e),["".concat(encodeURIComponent("".concat(t.field,".specified")),"=false")])}return[].concat(Object(Se.a)(e),["".concat(encodeURIComponent("".concat(t.field,".").concat(t.operator)),"=").concat(encodeURIComponent(t.value))])}),[]).join("&"):""},Ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=!(!t&&!n),r="".concat(t).concat(t?"&":"").concat(n);return"".concat(e).concat(a?"?".concat(r):"")},ze=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a,o,i,c,s,l;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filters,a=void 0===n?[]:n,o=t.pagination,i=Ae(a),c=o?"page=".concat(o.page,"&size=").concat(o.rowsPerPage):"",s=Ue("".concat(Te,"/").concat("statements"),i,c),l=Object(r.a)({},Me(),{method:"GET"}),e.abrupt("return",Ie(s,l));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Te,"/").concat("statements"),a=Object(r.a)({},Me(),{method:"PUT",body:t?JSON.stringify(t):null}),e.abrupt("return",Ie(n,a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){return{headers:new Headers({Authorization:"Bearer ".concat(window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:""),"Content-Type":"application/json"})}},Xe=function(){var e=Object(w.a)(k.a.mark((function e(t,n){var a,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,n);case 2:if(a=e.sent,o=Object(r.a)({},a.headers.has("X-Total-Count")?{"X-Total-Count":parseInt(a.headers.get("X-Total-Count"),10)}:{}),!(a.status>=200&&a.status<300)){e.next=12;break}return e.next=7,a.json();case 7:e.t1=e.sent,e.t2=o,e.t0={data:e.t1,headers:e.t2},e.next=13;break;case 12:e.t0=Promise.reject(new Error(a.statusText||a.status));case 13:return e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e.filter((function(e){return e.field&&e.operator})).reduce((function(e,t){switch(t.operator){case"specified":return[].concat(Object(Se.a)(e),["".concat(encodeURIComponent("".concat(t.field,".specified")),"=true")]);case"unspecified":return[].concat(Object(Se.a)(e),["".concat(encodeURIComponent("".concat(t.field,".specified")),"=false")])}return[].concat(Object(Se.a)(e),["".concat(encodeURIComponent("".concat(t.field,".").concat(t.operator)),"=").concat(encodeURIComponent(t.value))])}),[]).join("&"):""},Je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=!(!t&&!n),r="".concat(t).concat(t?"&":"").concat(n);return"".concat(e).concat(a?"?".concat(r):"")},We=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a,o,i,c,s,l;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filters,a=void 0===n?[]:n,o=t.pagination,i=He(a),c=o?"page=".concat(o.page,"&size=").concat(o.rowsPerPage):"",s=Je("".concat(Te,"/").concat("alerts"),i,c),l=Object(r.a)({},Le(),{method:"GET"}),e.abrupt("return",Xe(s,l));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Te,"/").concat("alerts"),a=Object(r.a)({},Le(),{method:"PUT",body:t?JSON.stringify(t):null}),e.abrupt("return",Xe(n,a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e="viewstatements",qe="managealerts",Ge=function(e){var t;switch(e){case _e:t=Be;break;case qe:t=Ke;break;default:t=new Error("Error! Unknown api :".concat(e))}return t},Ve=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onMount=function(){var e=a.props,t=e.icon,n=e.onError,r=e.t,o=e.keycloak,i=a.state,c=i.descriptionFilter,s=i.rangeFilter,l=function(e){var t;switch(e){case _e:t=ze;break;case qe:t=We;break;default:t=new Error("Error! Unknown api :".concat(e))}return t}(t),u=o.initialized&&o.authenticated,d=o.idTokenParsed.preferred_username,p=[{field:"userId",operator:"equals",value:d}];c&&p.push({field:"description",operator:"contains",value:c}),s&&(p.push({field:"createdAt",operator:"lessThanOrEqual",value:s.dateB}),p.push({field:"createdAt",operator:"greaterThanOrEqual",value:s.dateA})),u&&(d?l({filters:p}).then((function(e){var t=e.data.slice().sort((function(e,t){var n=new Date(e.createdAt),a=new Date(t.createdAt)-n;return 0===a&&(a=e.description.localeCompare(t.description)),a}));a.setState({data:t})})).catch((function(e){n(e),a.setState({notificationStatus:xe.ERROR,notificationMessage:r("common.couldNotFetchData")})})).finally((function(){return a.setState({loading:!1})})):a.setState({loading:!1,notificationStatus:xe.ERROR,notificationMessage:r("common.missingId")}))},a.state={modalOpen:!1,loading:!0,notificationStatus:null,notificationMessage:null,descriptionFilter:null,rangeFilter:null},a.toggleModal=a.toggleModal.bind(Object(E.a)(a)),a.putDocumentRead=a.putDocumentRead.bind(Object(E.a)(a)),a.closeNotification=a.closeNotification.bind(Object(E.a)(a)),a.onChangeDescription=a.onChangeDescription.bind(Object(E.a)(a)),a.onChangeRangeFilter=a.onChangeRangeFilter.bind(Object(E.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.keycloak;e.initialized&&e.authenticated&&this.onMount()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.keycloak,a=this.state,r=a.descriptionFilter,o=a.rangeFilter,i=n.initialized&&n.authenticated,c=e.keycloak.authenticated!==i,s=t.descriptionFilter!==r,l=t.rangeFilter!==o;i&&(c||s||l)&&this.onMount()}},{key:"onChangeDescription",value:function(e){this.setState({descriptionFilter:e})}},{key:"onChangeRangeFilter",value:function(e){this.setState({rangeFilter:e})}},{key:"closeNotification",value:function(){this.setState({notificationStatus:null,notificationMessage:null})}},{key:"putDocumentRead",value:function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a,r,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,a=n.icon,r=n.t,o=Ge(a),e.prev=2,e.next=5,o(t);case 5:e.sent&&this.onMount(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.setState({notificationStatus:xe.ERROR,notificationMessage:r("common.couldNotFetchData")});case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleModal",value:function(){this.setState((function(e){return{modalOpen:!e.modalOpen}}))}},{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,a=e.keycloak,r=e.t,o=this.state,i=o.modalOpen,c=o.data,s=o.loading,l=o.notificationStatus,u=o.notificationMessage;return h.a.createElement(le.a,{theme:this.theme},h.a.createElement(me,{keycloak:a},r("common.notAuthenticated")),h.a.createElement(pe,{keycloak:a},s&&r("common.loading"),!s&&h.a.createElement(se,{icon:t,title:n,modalOpen:i,toggleModal:this.toggleModal,data:c,putDocumentRead:this.putDocumentRead,onChangeDescription:this.onChangeDescription,onChangeRangeFilter:this.onChangeRangeFilter})),h.a.createElement(xe,{status:l,message:u,onClose:this.closeNotification}))}}]),n}(h.a.PureComponent);Ve.defaultProps={icon:"",title:"",onError:function(){}};var Ye,Qe=(Ye=Object(i.b)()(Ve),function(e){return h.a.createElement(b.Consumer,null,(function(t){return h.a.createElement(Ye,Object.assign({},e,{keycloak:t}))}))}),Ze=function(){return window&&window.entando&&window.entando.keycloak&&Object(r.a)({},window.entando.keycloak,{initialized:!0})||{initialized:!1}},$e={icon:"icon",title:"title"},et=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).mountPoint=null,e.unsubscribeFromKeycloakEvent=null,e.keycloak=Ze(),e}return Object(u.a)(n,[{key:"attributeChangedCallback",value:function(e,t,n){if(!Object.values($e).includes(e))throw new Error("Untracked changed attribute: ".concat(e));this.mountPoint&&n!==t&&this.render()}},{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.appendChild(this.mountPoint);var t,n,a=this.getAttribute("locale")||"en";o.a.changeLanguage(a),this.keycloak=Object(r.a)({},Ze(),{initialized:!0}),this.unsubscribeFromKeycloakEvent=(t="keycloak",n=function(){e.keycloak=Object(r.a)({},Ze(),{initialized:!0}),e.render()},window.addEventListener(t,n),function(){window.removeEventListener(t,n)}),this.render()}},{key:"render",value:function(){var e=this.getAttribute($e.icon),t=this.getAttribute($e.title);v.a.render(h.a.createElement(b.Provider,{value:this.keycloak},h.a.createElement(Qe,{icon:e,title:t})),this.mountPoint)}},{key:"disconnectedCallback",value:function(){this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent()}}],[{key:"observedAttributes",get:function(){return Object.values($e)}}]),n}(Object(m.a)(HTMLElement));customElements.define("list-item",et)},67:function(e){e.exports=JSON.parse('{"common":{"couldNotFetchData":"Unfortunately we could not get data for this user","widgetName":"{{widgetNamePlaceholder}}","name":"Name","value":"Value","loading":"Loading...","missingId":"Please provide user ID","notAuthenticated":"Waiting for authorization...","download":"Download file"},"entities":{"item":{"id":"ID","accountNumber":"entities.item.accountNumber","balance":"entities.item.balance","userId":"entities.item.userId"}}}')},68:function(e,t,n){e.exports=n.p+"static/media/investments.e40160bb.svg"},69:function(e,t,n){e.exports=n.p+"static/media/managealerts.c93a3064.svg"},70:function(e,t,n){e.exports=n.p+"static/media/paybills.955e0527.svg"},71:function(e,t,n){e.exports=n.p+"static/media/sendmoney.e86b26c5.svg"},72:function(e,t,n){e.exports=n.p+"static/media/transfermoney.98b87291.svg"},73:function(e,t,n){e.exports=n.p+"static/media/viewstatements.7aebe259.svg"},74:function(e,t,n){e.exports=n.p+"static/media/Entando_Development_Methodology.dc5129ba.pdf"},83:function(e,t,n){e.exports=n(111)},84:function(e,t,n){}},[[83,1,2]]]);
//# sourceMappingURL=main.c2572667.chunk.js.map