(this.webpackJsonplistitem=this.webpackJsonplistitem||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);n(84),n(85);var a=n(43),r=n(11),i=n(50),o=n(49),c={en:n(67)},s=Object.keys(c).reduce((function(e,t){return Object(r.a)({},e,Object(a.a)({},t,{translation:c[t]}))}),{});i.a.use(o.a).init({fallbackLng:"en",resources:s,interpolation:{escapeValue:!1}});var l=n(22),u=n(23),d=n(25),p=n(24),m=n(80),f=n(0),h=n.n(f),g=n(13),v=n.n(g),b=h.a.createContext(null);var y=n(10),k=n.n(y),E=n(26),O=n(20),j=n(68),C=n.n(j),w=n(69),D=n.n(w),N=n(70),R=n.n(N),P=n(71),F=n.n(P),x=n(72),S=n.n(x),T=n(73),M=n.n(T),I="investments",A="managealerts",U="paybills",z="sendmoney",L="transfermoney",B="viewstatements",X={investments:C.a,managealerts:D.a,paybills:R.a,sendmoney:F.a,transfermoney:S.a,viewstatements:M.a},H=function(e){switch(e){case I:return X.investments;case A:return X.managealerts;case U:return X.paybills;case z:return X.sendmoney;case L:return X.transfermoney;case B:return X.viewstatements;default:return null}},J=function(e){var t=e.icon,n=e.className,a=e.style;return h.a.createElement("img",{id:"my-icon",src:H(t),style:a,className:n,alt:"icon"})};J.defaultProps={className:"",style:{}};var W=J,K=function(e){var t=e.title,n=e.className,a=e.style;return h.a.createElement("span",{id:"my-title",className:n,style:a},t)};K.defaultProps={className:"",style:{}};var q=K,_=function(e){var t=e.count,n=e.className,a=e.style;return h.a.createElement("span",{id:"my-counter",className:n,style:a},t)};_.defaultProps={className:"",style:{}};var G=_,V=n(142),Y=n(134),Q=n(135),Z=n(136),$=n(137),ee=n(133),te=function(e){for(var t=e.className,n=e.itemsPerPage,a=e.totalItems,r=e.paginate,i=e.currentPage,o=[],c=1;c<=Math.ceil(a/n);c++)o.push(c);return h.a.createElement("nav",{className:t},h.a.createElement("ul",{className:"pagination"},o.map((function(e){return h.a.createElement("li",{key:e,className:"page-item"},h.a.createElement("button",{type:"button",onClick:function(){return r(e)},className:"page-link",style:i===e?{background:"#eeeeee"}:null},e))}))))},ne=n(74),ae=n.n(ne),re=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).paginate=function(e){return a.setCurrentPage(e)},a.handleFileRead=function(e){var t=Object(r.a)({},e);if(!e.read){var n=a.props.putDocumentRead;t.read=!0,n(t)}},a.generateTable=function(e){return h.a.createElement(ee.a,{className:"MyTable",responsive:!0,size:"sm",hover:!0},h.a.createElement("thead",null,h.a.createElement("tr",null,h.a.createElement("th",null,"DOCUMENT"),h.a.createElement("th",null,"DATE"))),h.a.createElement("tbody",null,e&&e.map((function(e){var t=e.createdAt,n=e.description,r=e.read;return h.a.createElement("tr",{key:e.id,onClick:function(){a.handleFileRead(e),window.open(ae.a,"_blank")}},h.a.createElement("td",{style:r?{fontWeight:"normal"}:{fontWeight:"bold"}},n),h.a.createElement("td",{style:r?{fontWeight:"normal"}:{fontWeight:"bold"}},t))}))))},a.state={itemsPerPage:5,currentPage:1},a}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.data;e.data!==t&&this.handleTable()}},{key:"setCurrentPage",value:function(e){this.setState({currentPage:e})}},{key:"handleTable",value:function(){var e=this.props.data,t=this.state,n=t.currentPage,a=t.itemsPerPage,r=n*a,i=r-a,o=e.slice(i,r);return this.generateTable(o)}},{key:"render",value:function(){var e=this.state,t=e.itemsPerPage,n=e.currentPage,a=this.props.data;return h.a.createElement("div",null,this.handleTable(),h.a.createElement(te,{className:"paginator",itemsPerPage:t,totalItems:a.length,currentPage:n,paginate:this.paginate}))}}]),n}(h.a.PureComponent),ie=function(e){return e.date.toISOString().substring(0,10)},oe=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={descriptionFilter:""},a.onChangeDescription=a.onChangeDescription.bind(Object(O.a)(a)),a.filterByDescription=a.filterByDescription.bind(Object(O.a)(a)),a.onChangeRangeFilter=a.onChangeRangeFilter.bind(Object(O.a)(a)),a}return Object(u.a)(n,[{key:"onChangeDescription",value:function(e){var t;e&&e.target&&(t=e.target.value),this.setState({descriptionFilter:t})}},{key:"onChangeRangeFilter",value:function(e){var t,n=this.props.changeRangeFilter;e&&e.target&&(t=e.target.value);var a=new Date,r=ie({date:a}),i={dateA:r,dateB:ie({date:a})};switch(t){case"90":r=function(e){var t=e.d,n=e.range,a=new Date;return a.setDate(t.getDate()-n),ie({date:a})}({d:a,range:90}),i.dateA=r;break;case"month":r=function(e){var t=e.d,n=new Date(t.getFullYear(),t.getMonth(),1,t.getHours());return ie({date:n})}({d:new Date}),i.dateA=r;break;default:i=null}n(i)}},{key:"filterByDescription",value:function(e){var t=this.state.descriptionFilter;(0,this.props.changeDescription)(""===e?e:t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOpen,a=t.toggle,r=t.title,i=t.className,o=t.data,c=t.putDocumentRead,s=this.state.descriptionFilter;return h.a.createElement(V.a,{isOpen:n,className:i},h.a.createElement(Y.a,{style:{color:"#0E6837"}},r,h.a.createElement("select",{name:"transactionRange",id:"transactionRange",className:"select-range",onChange:this.onChangeRangeFilter},h.a.createElement("option",{value:"all"},"All transactions"),h.a.createElement("option",{value:"month"},"Last month"),h.a.createElement("option",{value:"90"},"Last 90 days")),h.a.createElement("input",{className:"search-input",type:"text",onChange:this.onChangeDescription,value:s}),h.a.createElement("button",{className:"search-button",type:"button",onClick:this.filterByDescription},"Filter")),h.a.createElement(Q.a,{style:{padding:0}},h.a.createElement("div",{className:"my-table"},o&&h.a.createElement(re,{toggleModal:a,data:o,putDocumentRead:c}))),h.a.createElement(Z.a,null,h.a.createElement($.a,{onClick:function(){e.onChangeRangeFilter(),e.onChangeDescription(),e.filterByDescription(""),a()}},"Close")))}}]),n}(f.Component);oe.defaultProps={title:"",className:"",data:[]};var ce=oe,se=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,a=e.modalOpen,r=e.toggleModal,i=e.data,o=e.putDocumentRead,c=e.onChangeDescription,s=e.onChangeRangeFilter,l=function(){var e=0;return i.forEach((function(t){t.read||e++})),e};return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"list-item",onClick:Array.isArray(i)&&i.length?function(){return r()}:null},t&&h.a.createElement(W,{icon:t})," ",n&&h.a.createElement(q,{title:n})," ",i&&i.length>0&&0!==l()?h.a.createElement(G,{count:l()}):null),i?h.a.createElement(ce,{className:"my-modal",isOpen:a,toggle:r,title:n,data:i,putDocumentRead:o,changeDescription:function(e){c(e)},changeRangeFilter:function(e){s(e)}}):null)}}]),n}(h.a.PureComponent);se.defaultProps={icon:"",iconStyle:{},countStyle:{},title:"",titleStyle:{},data:[]};var le=se,ue=n(139),de=n(1),pe=n.n(de),me=(pe.a.shape({initialized:pe.a.bool,authenticated:pe.a.bool}),function(e){var t=e.children,n=e.keycloak;return n.initialized&&n.authenticated?t:null}),fe=function(e){var t=e.children,n=e.keycloak;return n.initialized&&n.authenticated?null:t},he=n(8),ge=n(140),ve=n(143),be=n(52),ye=n(14),ke=n(141),Ee=n(77),Oe=n.n(Ee),je=n(78),Ce=n.n(je),we=n(75),De=n.n(we),Ne=n(79),Re=n.n(Ne),Pe={success:De.a,error:Oe.a,info:Ce.a},Fe={success:3e3,error:null,info:5e3},xe=function e(t){var n=t.className,a=t.classes,r=t.status,i=t.message,o=t.onClose,c=!!i,s=r||e.INFO,l=Pe[s],u=Fe[s],d=h.a.createElement("span",{className:a.message},h.a.createElement(l,{className:Object(he.a)(a.icon,a.iconStatus)}),i);return h.a.createElement(ge.a,{open:c,onClose:o,autoHideDuration:u},h.a.createElement(ve.a,{className:Object(he.a)(a[s],n),message:d,action:[h.a.createElement(ke.a,{key:"close","aria-label":"close",color:"inherit",onClick:o},h.a.createElement(Re.a,{className:a.icon}))]}))};xe.SUCCESS="success",xe.ERROR="error",xe.defaultProps={message:null,className:"",status:xe.INFO="info",onClose:function(){}};var Se=Object(ye.a)((function(e){return{message:{display:"flex",alignItems:"center"},icon:{fontSize:20},iconStatus:{opacity:.9,marginRight:e.spacing(1)},success:{backgroundColor:be.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main}}}),{withTheme:!0})(xe),Te=n(32),Me="/seedsdashboard/api",Ie=function(){return{headers:new Headers({"Content-Type":"application/json"})}},Ae=function(){var e=Object(E.a)(k.a.mark((function e(t,n){var a,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,n);case 2:if(a=e.sent,i=Object(r.a)({},a.headers.has("X-Total-Count")?{"X-Total-Count":parseInt(a.headers.get("X-Total-Count"),10)}:{}),!(a.status>=200&&a.status<300)){e.next=12;break}return e.next=7,a.json();case 7:e.t1=e.sent,e.t2=i,e.t0={data:e.t1,headers:e.t2},e.next=13;break;case 12:e.t0=Promise.reject(new Error(a.statusText||a.status));case 13:return e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e.filter((function(e){return e.field&&e.operator})).reduce((function(e,t){switch(t.operator){case"specified":return[].concat(Object(Te.a)(e),["".concat(encodeURIComponent("".concat(t.field,".specified")),"=true")]);case"unspecified":return[].concat(Object(Te.a)(e),["".concat(encodeURIComponent("".concat(t.field,".specified")),"=false")])}return[].concat(Object(Te.a)(e),["".concat(encodeURIComponent("".concat(t.field,".").concat(t.operator)),"=").concat(encodeURIComponent(t.value))])}),[]).join("&"):""},ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=!(!t&&!n),r="".concat(t).concat(t?"&":"").concat(n);return"".concat(e).concat(a?"?".concat(r):"")},Le=function(){var e=Object(E.a)(k.a.mark((function e(t){var n,a,i,o,c,s,l;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filters,a=void 0===n?[]:n,i=t.pagination,o=Ue(a),c=i?"page=".concat(i.page,"&size=").concat(i.rowsPerPage):"",s=ze("".concat(Me,"/").concat("statements"),o,c),l=Object(r.a)({},Ie(),{method:"GET"}),e.abrupt("return",Ae(s,l));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=Object(E.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Me,"/").concat("statements"),a=Object(r.a)({},Ie(),{method:"PUT",body:t?JSON.stringify(t):null}),e.abrupt("return",Ae(n,a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=function(){return{headers:new Headers({"Content-Type":"application/json"})}},He=function(){var e=Object(E.a)(k.a.mark((function e(t,n){var a,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,n);case 2:if(a=e.sent,i=Object(r.a)({},a.headers.has("X-Total-Count")?{"X-Total-Count":parseInt(a.headers.get("X-Total-Count"),10)}:{}),!(a.status>=200&&a.status<300)){e.next=12;break}return e.next=7,a.json();case 7:e.t1=e.sent,e.t2=i,e.t0={data:e.t1,headers:e.t2},e.next=13;break;case 12:e.t0=Promise.reject(new Error(a.statusText||a.status));case 13:return e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e.filter((function(e){return e.field&&e.operator})).reduce((function(e,t){switch(t.operator){case"specified":return[].concat(Object(Te.a)(e),["".concat(encodeURIComponent("".concat(t.field,".specified")),"=true")]);case"unspecified":return[].concat(Object(Te.a)(e),["".concat(encodeURIComponent("".concat(t.field,".specified")),"=false")])}return[].concat(Object(Te.a)(e),["".concat(encodeURIComponent("".concat(t.field,".").concat(t.operator)),"=").concat(encodeURIComponent(t.value))])}),[]).join("&"):""},We=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=!(!t&&!n),r="".concat(t).concat(t?"&":"").concat(n);return"".concat(e).concat(a?"?".concat(r):"")},Ke=function(){var e=Object(E.a)(k.a.mark((function e(t){var n,a,i,o,c,s,l;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filters,a=void 0===n?[]:n,i=t.pagination,o=Je(a),c=i?"page=".concat(i.page,"&size=").concat(i.rowsPerPage):"",s=We("".concat(Me,"/").concat("alerts"),o,c),l=Object(r.a)({},Xe(),{method:"GET"}),e.abrupt("return",He(s,l));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=Object(E.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Me,"/").concat("alerts"),a=Object(r.a)({},Xe(),{method:"PUT",body:t?JSON.stringify(t):null}),e.abrupt("return",He(n,a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e="viewstatements",Ge="managealerts",Ve=function(e){var t;switch(e){case _e:t=Be;break;case Ge:t=qe;break;default:t=new Error("Error! Unknown api :".concat(e))}return t},Ye=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onMount=function(){var e=a.props,t=e.icon,n=e.onError,r=e.t,i=e.keycloak,o=a.state,c=o.descriptionFilter,s=o.rangeFilter,l=function(e){var t;switch(e){case _e:t=Le;break;case Ge:t=Ke;break;default:t=new Error("Error! Unknown api :".concat(e))}return t}(t),u=i.initialized&&i.authenticated,d=i.subject,p=[{field:"userId",operator:"equals",value:d}];c&&p.push({field:"description",operator:"contains",value:c}),s&&(p.push({field:"createdAt",operator:"lessThanOrEqual",value:s.dateB}),p.push({field:"createdAt",operator:"greaterThanOrEqual",value:s.dateA})),u&&(d?l({filters:p}).then((function(e){var t=e.data.slice().sort((function(e,t){var n=new Date(e.createdAt),a=new Date(t.createdAt)-n;return 0===a&&(a=e.description.localeCompare(t.description)),a}));a.setState({data:t})})).catch((function(e){n(e),a.setState({notificationStatus:Se.ERROR,notificationMessage:r("common.couldNotFetchData")})})).finally((function(){return a.setState({loading:!1})})):a.setState({loading:!1,notificationStatus:Se.ERROR,notificationMessage:r("common.missingId")}))},a.state={modalOpen:!1,loading:!0,notificationStatus:null,notificationMessage:null,descriptionFilter:null,rangeFilter:null},a.toggleModal=a.toggleModal.bind(Object(O.a)(a)),a.putDocumentRead=a.putDocumentRead.bind(Object(O.a)(a)),a.closeNotification=a.closeNotification.bind(Object(O.a)(a)),a.onChangeDescription=a.onChangeDescription.bind(Object(O.a)(a)),a.onChangeRangeFilter=a.onChangeRangeFilter.bind(Object(O.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.keycloak;e.initialized&&e.authenticated&&this.onMount()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.keycloak,a=this.state,r=a.descriptionFilter,i=a.rangeFilter,o=n.initialized&&n.authenticated,c=e.keycloak.authenticated!==o,s=t.descriptionFilter!==r,l=t.rangeFilter!==i;o&&(c||s||l)&&this.onMount()}},{key:"onChangeDescription",value:function(e){this.setState({descriptionFilter:e})}},{key:"onChangeRangeFilter",value:function(e){this.setState({rangeFilter:e})}},{key:"closeNotification",value:function(){this.setState({notificationStatus:null,notificationMessage:null})}},{key:"putDocumentRead",value:function(){var e=Object(E.a)(k.a.mark((function e(t){var n,a,r,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,a=n.icon,r=n.t,i=Ve(a),e.prev=2,e.next=5,i(t);case 5:e.sent&&this.onMount(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.setState({notificationStatus:Se.ERROR,notificationMessage:r("common.couldNotFetchData")});case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleModal",value:function(){this.setState((function(e){return{modalOpen:!e.modalOpen}}))}},{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,a=e.keycloak,r=e.t,i=this.state,o=i.modalOpen,c=i.data,s=i.loading,l=i.notificationStatus,u=i.notificationMessage;return h.a.createElement(ue.a,{theme:this.theme},h.a.createElement(fe,{keycloak:a},r("common.notAuthenticated")),h.a.createElement(me,{keycloak:a},s&&r("common.loading"),!s&&h.a.createElement(le,{icon:t,title:n,modalOpen:o,toggleModal:this.toggleModal,data:c,putDocumentRead:this.putDocumentRead,onChangeDescription:this.onChangeDescription,onChangeRangeFilter:this.onChangeRangeFilter})),h.a.createElement(Se,{status:l,message:u,onClose:this.closeNotification}))}}]),n}(h.a.PureComponent);Ye.defaultProps={icon:"",title:"",onError:function(){}};var Qe,Ze=(Qe=Object(o.b)()(Ye),function(e){return h.a.createElement(b.Consumer,null,(function(t){return h.a.createElement(Qe,Object.assign({},e,{keycloak:t}))}))}),$e=function(){return window&&window.entando&&window.entando.keycloak&&Object(r.a)({},window.entando.keycloak,{initialized:!0})||{initialized:!1}},et={icon:"icon",title:"title"},tt=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).mountPoint=null,e.unsubscribeFromKeycloakEvent=null,e.keycloak=$e(),e}return Object(u.a)(n,[{key:"attributeChangedCallback",value:function(e,t,n){if(!Object.values(et).includes(e))throw new Error("Untracked changed attribute: ".concat(e));this.mountPoint&&n!==t&&this.render()}},{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.appendChild(this.mountPoint);var t,n,a=this.getAttribute("locale")||"en";i.a.changeLanguage(a),this.keycloak=Object(r.a)({},$e(),{initialized:!0}),this.unsubscribeFromKeycloakEvent=(t="keycloak",n=function(){e.keycloak=Object(r.a)({},$e(),{initialized:!0}),e.render()},window.addEventListener(t,n),function(){window.removeEventListener(t,n)}),this.render()}},{key:"render",value:function(){var e=this.getAttribute(et.icon),t=this.getAttribute(et.title);v.a.render(h.a.createElement(b.Provider,{value:this.keycloak},h.a.createElement(Ze,{icon:e,title:t})),this.mountPoint)}},{key:"disconnectedCallback",value:function(){this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent()}}],[{key:"observedAttributes",get:function(){return Object.values(et)}}]),n}(Object(m.a)(HTMLElement));customElements.define("list-item",tt)},67:function(e){e.exports=JSON.parse('{"common":{"couldNotFetchData":"Unfortunately we could not get data for this user","widgetName":"{{widgetNamePlaceholder}}","name":"Name","value":"Value","loading":"Loading...","missingId":"Please provide user ID","notAuthenticated":"Waiting for authorization...","download":"Download file"},"entities":{"item":{"id":"ID","accountNumber":"entities.item.accountNumber","balance":"entities.item.balance","userId":"entities.item.userId"}}}')},68:function(e,t,n){e.exports=n.p+"static/media/investments.e40160bb.svg"},69:function(e,t,n){e.exports=n.p+"static/media/managealerts.c93a3064.svg"},70:function(e,t,n){e.exports=n.p+"static/media/paybills.955e0527.svg"},71:function(e,t,n){e.exports=n.p+"static/media/sendmoney.e86b26c5.svg"},72:function(e,t,n){e.exports=n.p+"static/media/transfermoney.98b87291.svg"},73:function(e,t,n){e.exports=n.p+"static/media/viewstatements.7aebe259.svg"},74:function(e,t,n){e.exports=n.p+"static/media/Entando_Development_Methodology.dc5129ba.pdf"},83:function(e,t,n){e.exports=n(111)},84:function(e,t,n){}},[[83,1,2]]]);
//# sourceMappingURL=main.53c3a271.chunk.js.map